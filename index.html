<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>QUIZ! OHTANISAN</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            margin: 0;
            padding: 20px;
        }
        h1 {
            font-size: 36px;
            margin-bottom: 20px;
        }
        p {
            font-size: 18px;
            margin-bottom: 20px;
        }
        #start-screen, #game-screen, #result-screen {
            display: none;
        }
        #start-screen {
            display: block;
        }
        #start-button {
            font-size: 24px;
            padding: 15px 30px;
            background-color: #4CAF50;
            color: white;
            border: none;
            cursor: pointer;
            margin-top: 20px;
        }
        #start-button:hover {
            background-color: #45a049;
        }
        #game-screen img, #result-screen img, #start-screen img {
            width: 300px;
            height: 300px;
            margin: 20px 0;
        }
        #choices button {
            margin: 10px;
            padding: 10px 20px;
            font-size: 16px;
            cursor: pointer;
        }
        #timer {
            font-size: 24px;
            margin-top: 20px;
        }
        #back-to-start {
            font-size: 18px;
            padding: 10px 20px;
            background-color: #008CBA;
            color: white;
            border: none;
            cursor: pointer;
            margin-top: 20px;
        }
        #back-to-start:hover {
            background-color: #007399;
        }
    </style>
</head>
<body>
    <audio id="bgm" loop>
        <source src="bgm.mp3" type="audio/mpeg">
        あなたのブラウザはオーディオ要素をサポートしていません。
    </audio>

    <div id="start-screen">
        <h1>QUIZ! OHTANISAN</h1>
        <p>Welcome to the quiz game! You will be shown images of different people, and you have to choose who it is from two options. You have 2 seconds to answer each question. There are 10 questions in total. Good luck!</p>
        <img id="start-image" src="" alt="OHTANISAN">
        <button id="start-button">START</button>
    </div>

    <div id="game-screen">
        <img id="question-image" src="" alt="Question Image">
        <div id="choices">
            <button id="choice1"></button>
            <button id="choice2"></button>
        </div>
        <div id="timer">Time left: 2s</div>
    </div>

    <div id="result-screen">
        <h2>Result</h2>
        <p>Your score: <span id="score"></span>/10</p>
        <img id="result-image" src="" alt="Result Image">
        <button id="back-to-start">Back to Start</button>
    </div>

    <script>
        const categories = {
            OHTANISAN: ['ohtani1.jpg', 'ohtani2.jpg', 'ohtani3.jpg', 'ohtani4.jpg', 'ohtani5.jpg'],
            MIZUTANISAN: ['mizutani1.jpg', 'mizutani2.jpg', 'mizutani3.jpg', 'mizutani4.jpg', 'mizutani5.jpg'],
            ELONSAN: ['elon1.jpg', 'elon2.jpg', 'elon3.jpg', 'elon4.jpg', 'elon5.jpg'],
            TRUMPSAN: ['trump1.jpg', 'trump2.jpg', 'trump3.jpg', 'trump4.jpg', 'trump5.jpg']
        };

        const allCategories = ['OHTANISAN', 'MIZUTANISAN', 'ELONSAN', 'TRUMPSAN'];

        let currentQuestion = 0;
        let score = 0;
        let timer;
        let selectedCategory;
        let selectedImage;
        let correctAnswer;

        const bgm = document.getElementById('bgm');
        bgm.play();

        function startGame() {
            document.getElementById('start-screen').style.display = 'none';
            document.getElementById('game-screen').style.display = 'block';
            currentQuestion = 0;
            score = 0;
            nextQuestion();
        }

        function nextQuestion() {
            if (currentQuestion >= 10) {
                showResult();
                return;
            }
            currentQuestion++;
            // ランダムにカテゴリを選ぶ
            selectedCategory = allCategories[Math.floor(Math.random() * allCategories.length)];
            // そのカテゴリからランダムに画像を選ぶ
            selectedImage = categories[selectedCategory][Math.floor(Math.random() * 5)];
            document.getElementById('question-image').src = selectedImage;
            // 選択肢を生成
            correctAnswer = selectedCategory;
            const wrongAnswers = allCategories.filter(cat => cat !== correctAnswer);
            const wrongAnswer = wrongAnswers[Math.floor(Math.random() * 3)];
            const choices = [correctAnswer, wrongAnswer];
            // 選択肢をシャッフル
            choices.sort(() => Math.random() - 0.5);
            document.getElementById('choice1').textContent = choices[0];
            document.getElementById('choice2').textContent = choices[1];
            // ボタンを有効化
            document.getElementById('choice1').disabled = false;
            document.getElementById('choice2').disabled = false;
            // タイマーを設定
            let timeLeft = 2;
            document.getElementById('timer').textContent = `Time left: ${timeLeft}s`;
            timer = setInterval(() => {
                timeLeft--;
                if (timeLeft >= 0) {
                    document.getElementById('timer').textContent = `Time left: ${timeLeft}s`;
                } else {
                    clearInterval(timer);
                    // 時間切れで選択肢を無効化
                    document.getElementById('choice1').disabled = true;
                    document.getElementById('choice2').disabled = true;
                    // 次の問題へ
                    nextQuestion();
                }
            }, 1000);
            // 2秒後に選択肢を無効化
            setTimeout(() => {
                document.getElementById('choice1').disabled = true;
                document.getElementById('choice2').disabled = true;
            }, 2000);
        }

        function checkAnswer(selected) {
            clearInterval(timer);
            if (selected === correctAnswer) {
                score++;
            }
            // 次の問題へ
            nextQuestion();
        }

        function showResult() {
            document.getElementById('game-screen').style.display = 'none';
            document.getElementById('result-screen').style.display = 'block';
            document.getElementById('score').textContent = score;
            // 結果画面にランダムな画像を表示
            const randomCategory = allCategories[Math.floor(Math.random() * 4)];
            const randomImage = categories[randomCategory][Math.floor(Math.random() * 5)];
            document.getElementById('result-image').src = randomImage;
        }

        function backToStart() {
            document.getElementById('result-screen').style.display = 'none';
            document.getElementById('start-screen').style.display = 'block';
            // スタート画面にランダムなOHTANISAN画像を設定
            const ohtaniImages = categories['OHTANISAN'];
            const randomOhtaniImage = ohtaniImages[Math.floor(Math.random() * 5)];
            document.getElementById('start-image').src = randomOhtaniImage;
        }

        // イベントリスナーを設定
        document.getElementById('start-button').addEventListener('click', startGame);
        document.getElementById('choice1').addEventListener('click', () => {
            if (!document.getElementById('choice1').disabled) {
                checkAnswer(document.getElementById('choice1').textContent);
            }
        });
        document.getElementById('choice2').addEventListener('click', () => {
            if (!document.getElementById('choice2').disabled) {
                checkAnswer(document.getElementById('choice2').textContent);
            }
        });
        document.getElementById('back-to-start').addEventListener('click', backToStart);

        // 初回スタート画面にランダムなOHTANISAN画像を設定
        backToStart();
    </script>
</body>
</html>